<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FireBot: main.cpp/task_Extinguisher.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FireBot<span id="projectnumber">&#160;0.01</span>
   </div>
   <div id="projectbrief">This program is the term project for ME 507 which consists of an automated robotic fire extinguisher</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('task___extinguisher_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">task_Extinguisher.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;PrintStream.h&gt;</code><br />
<code>#include &quot;taskshare.h&quot;</code><br />
<code>#include &quot;taskqueue.h&quot;</code><br />
<code>#include &quot;<a class="el" href="shares_8h_source.html">shares.h</a>&quot;</code><br />
<code>#include &quot;SparkFun_TB6612.h&quot;</code><br />
<code>#include &quot;<a class="el" href="task___rotation___base_8h_source.html">task_Rotation_Base.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a60e4e11757e695fbf4862a32f377cbd6"><td class="memItemLeft" align="right" valign="top"><a id="a60e4e11757e695fbf4862a32f377cbd6" name="a60e4e11757e695fbf4862a32f377cbd6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BIN1</b>&#160;&#160;&#160;PB5</td></tr>
<tr class="memdesc:a60e4e11757e695fbf4862a32f377cbd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">One of the two inputs that determines the direction. <br /></td></tr>
<tr class="separator:a60e4e11757e695fbf4862a32f377cbd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c90582798e960f10821c2bda4911df"><td class="memItemLeft" align="right" valign="top"><a id="ab2c90582798e960f10821c2bda4911df" name="ab2c90582798e960f10821c2bda4911df"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BIN2</b>&#160;&#160;&#160;PA10</td></tr>
<tr class="memdesc:ab2c90582798e960f10821c2bda4911df"><td class="mdescLeft">&#160;</td><td class="mdescRight">One of the two inputs that determines the direction. <br /></td></tr>
<tr class="separator:ab2c90582798e960f10821c2bda4911df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1698a336f593db58ab114e61fa9c29"><td class="memItemLeft" align="right" valign="top"><a id="a8a1698a336f593db58ab114e61fa9c29" name="a8a1698a336f593db58ab114e61fa9c29"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PWMB</b>&#160;&#160;&#160;PB3</td></tr>
<tr class="memdesc:a8a1698a336f593db58ab114e61fa9c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWM input that controls the speed. <br /></td></tr>
<tr class="separator:a8a1698a336f593db58ab114e61fa9c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3603e97fc1a6348a090d0ce8aaef627d"><td class="memItemLeft" align="right" valign="top"><a id="a3603e97fc1a6348a090d0ce8aaef627d" name="a3603e97fc1a6348a090d0ce8aaef627d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STBY</b>&#160;&#160;&#160;PB4</td></tr>
<tr class="memdesc:a3603e97fc1a6348a090d0ce8aaef627d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows the H-bridges to work when high (has a pulldown resistor so it must actively pulled high) <br  />
 <br /></td></tr>
<tr class="separator:a3603e97fc1a6348a090d0ce8aaef627d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c47f313f862eec6774850d580d20efb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task___extinguisher_8cpp.html#a5c47f313f862eec6774850d580d20efb">task_Extinguisher</a> (void *p_params)</td></tr>
<tr class="memdesc:a5c47f313f862eec6774850d580d20efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the task function that actuates the fire extinguisher to extinguish the detected fire.  <a href="task___extinguisher_8cpp.html#a5c47f313f862eec6774850d580d20efb">More...</a><br /></td></tr>
<tr class="separator:a5c47f313f862eec6774850d580d20efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adffa1437dc5fac7cf61009d513a5594f"><td class="memItemLeft" align="right" valign="top"><a id="adffa1437dc5fac7cf61009d513a5594f" name="adffa1437dc5fac7cf61009d513a5594f"></a>
const TickType_t&#160;</td><td class="memItemRight" valign="bottom"><b>Extinguisher_PERIOD</b> = 100</td></tr>
<tr class="memdesc:adffa1437dc5fac7cf61009d513a5594f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of RTOS ticks between runs of the extinguisher task. <br /></td></tr>
<tr class="separator:adffa1437dc5fac7cf61009d513a5594f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af535b68d239dae423db1179112b80111"><td class="memItemLeft" align="right" valign="top"><a id="af535b68d239dae423db1179112b80111" name="af535b68d239dae423db1179112b80111"></a>
const int&#160;</td><td class="memItemRight" valign="bottom"><b>offsetB</b> = 1</td></tr>
<tr class="memdesc:af535b68d239dae423db1179112b80111"><td class="mdescLeft">&#160;</td><td class="mdescRight">This constant is used to allow motor configuration to line up with function names like "forward" within Motor class. Value can be 1 or -1. <br /></td></tr>
<tr class="separator:af535b68d239dae423db1179112b80111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace494d2aa026efcdee8104bc5eb4e1b3"><td class="memItemLeft" align="right" valign="top"><a id="ace494d2aa026efcdee8104bc5eb4e1b3" name="ace494d2aa026efcdee8104bc5eb4e1b3"></a>
Motor&#160;</td><td class="memItemRight" valign="bottom"><b>motor2</b> = Motor(<a class="el" href="task___extinguisher_8cpp.html#a60e4e11757e695fbf4862a32f377cbd6">BIN1</a>, <a class="el" href="task___extinguisher_8cpp.html#ab2c90582798e960f10821c2bda4911df">BIN2</a>, <a class="el" href="task___extinguisher_8cpp.html#a8a1698a336f593db58ab114e61fa9c29">PWMB</a>, <a class="el" href="task___extinguisher_8cpp.html#af535b68d239dae423db1179112b80111">offsetB</a>, <a class="el" href="task___rotation___base_8cpp.html#a3603e97fc1a6348a090d0ce8aaef627d">STBY</a>)</td></tr>
<tr class="memdesc:ace494d2aa026efcdee8104bc5eb4e1b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">An object of class Motor for the motor that actuates the fire extinguisher. <br /></td></tr>
<tr class="separator:ace494d2aa026efcdee8104bc5eb4e1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This task consists of an FSM which extinguishes a fire when one is detected. When a fire is detected, this task actuates a motor that is press-fit to a lead screw which clamps down the lever of a fire extinguisher that is mounted to the assembly. When the lever has been fully compressed, a micro limit switch is pressed which switches the direction of the motor. The motor rotates the lead screw thus translating the motor until a second mircro limit switch is pressed. At this point, the motor stops rotating, and the assembly is reset, thus ready to extinguish another fire. The motor which rotates the turntable resumes rotation.</p>
<dl class="section author"><dt>Author</dt><dd>Hunter Brooks &amp; William Dorosk </dd></dl>
<dl class="section date"><dt>Date</dt><dd>20 Nov 2021 File Created </dd>
<dd>
2 Dec 2021 Finalized file </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5c47f313f862eec6774850d580d20efb" name="a5c47f313f862eec6774850d580d20efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c47f313f862eec6774850d580d20efb">&#9670;&nbsp;</a></span>task_Extinguisher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_Extinguisher </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the task function that actuates the fire extinguisher to extinguish the detected fire. </p>
<p >This task consists of an FSM which extinguishes a fire when one is detected. When a fire is detected, this task actuates a motor that is press-fit to a lead screw which clamps down the lever of a fire extinguisher that is mounted to the assembly. When the lever has been fully compressed, a micro limit switch is pressed which switches the direction of the motor. The motor rotates the lead screw thus translating the motor until a second mircro limit switch is pressed. At this point, the motor stops rotating, and the assembly is reset, thus ready to extinguish another fire. The motor which rotates the turntable resumes rotation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_params</td><td>A pointer to function parameters which we don't use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f24d5430c7bb0e2c75dd0ffb2a8585cb.html">main.cpp</a></li><li class="navelem"><a class="el" href="task___extinguisher_8cpp.html">task_Extinguisher.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
